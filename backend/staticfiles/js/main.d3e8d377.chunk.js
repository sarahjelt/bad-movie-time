(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(68)},41:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(15),l=a.n(o),s=(a(40),a(41),a(13)),i=a(8),c=a(9),u=a(11),m=a(10),h=a(12),d=a(17),p=a(77),f=a(70),g=a(71),v=a(72),E=a(73),b=a(74),S=a(75),y=a(76),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;"checkbox"===e.target.type&&(r=e.target.checked);var o=Object(s.a)({},a.state.activeItem,Object(d.a)({},n,r));a.setState({activeItem:o})},a.state={activeItem:a.props.activeItem},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.toggle,n=t.onSave;return r.a.createElement(p.a,{isOpen:!0,toggle:a},r.a.createElement(f.a,{toggle:a},"Movie Item"),r.a.createElement(g.a,null,r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{type:"text",name:"title",value:this.state.activeItem.title,onChange:this.handleChange,placeholder:"Enter Movie Title"})),r.a.createElement(E.a,null,r.a.createElement(S.a,{for:"description"},"Description"),r.a.createElement(b.a,{type:"textarea",name:"description",value:this.state.activeItem.description,onChange:this.handleChange,placeholder:"Enter Movie description"})),r.a.createElement(E.a,{check:!0},r.a.createElement(S.a,{for:"completed"},r.a.createElement(b.a,{type:"checkbox",name:"completed",checked:this.state.activeItem.completed,onChange:this.handleChange}),"Completed")))),r.a.createElement(y.a,null,r.a.createElement("button",{onClick:function(){return n(e.state.activeItem)}},"Save")))}}]),t}(n.Component),_={searchByQuery:function(e){return fetch("\n      https://api.themoviedb.org/3/search/movie?api_key=6df7d06e1b9b586ab617bf9997934aaa&query=".concat(e,"&include_adult=false")).then(function(e){return e.json()})}},I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState({searchValue:e.target.value})},a.formActionDeterminer=function(e){e.preventDefault(),_.searchByQuery(a.state.searchValue).then(function(e){a.parseResultsFromAPICall(e)})},a.clearForm=function(e){e.preventDefault(),a.setState({searchValue:"",results:null})},a.parseResultsFromAPICall=function(e){var t=e.results,n=[];t.forEach(function(e){var t={id:e.id,title:void 0!==e.name?e.name:e.title,description:e.overview,poster:e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:"/img-placeholder.png",completed:!1,user_shelf:[a.props.ID]};n.push(t)}),a.setState({results:n})},a.state={searchValue:"",results:a.props.results,ID:a.props.ID,UN:a.props.UN},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onSave;return r.a.createElement("div",{className:"inner-search-comp"},r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Search...",id:"Search",type:"text",value:this.state.searchValue,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",{type:"submit",onClick:this.formActionDeterminer},"Search"),r.a.createElement("button",{className:"clear-search",onClick:this.clearForm},"Clear Search")),this.state.results?this.state.results.map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("h4",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("div",{className:"search-res-poster"},r.a.createElement("img",{src:e.poster,width:"100",alt:e.title+" poster"}),r.a.createElement("button",{onClick:function(){return t(e)}},"Save")))}):null)}}]),t}(n.Component),j=a(16),w=a.n(j);var C=function(e){var t=r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{onClick:function(){return e.displayed_form("login")}},"login"),r.a.createElement("li",{onClick:function(){return e.displayed_form("signup")}},"signup")),a=r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{onClick:e.handle_logout},"logout"));return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,e.logged_in?a:t),r.a.createElement("div",null,r.a.createElement("h1",{className:"text-white text-center my-4"},"BAD MOVIE TIME")))},O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState(function(e){var a=Object(s.a)({},e);return a[t]=n,a})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)}},r.a.createElement("h4",null,"Log In"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),r.a.createElement("input",{type:"submit"}))}}]),t}(r.a.Component),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState(function(e){var a=Object(s.a)({},e);return a[t]=n,a})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)}},r.a.createElement("h4",null,"Sign Up"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),r.a.createElement("input",{type:"submit"}))}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleLogin=function(e,t){e.preventDefault(),fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.user.username,userid:e.user.id})})},a.handleSignup=function(e,t){e.preventDefault(),fetch("http://localhost:8000/badmovietime/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.username,userid:e.id})})},a.handleLogout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:"",userid:0})},a.displayForm=function(e){a.setState({displayed_form:e})},a.refreshList=function(){w.a.get("/api/movies/").then(function(e){return a.setState({movies:e.data})}).catch(function(e){return console.log(e)})},a.renderItems=function(e){return(e?a.state.movies.filter(function(e){return!0===e.completed&&e.user_shelf.includes(a.state.userid)}):a.state.movies.filter(function(e){return!1===e.completed&&e.user_shelf.includes(a.state.userid)})).slice().reverse().map(function(e){return r.a.createElement("li",{key:e.id,className:"list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"movie-title"},r.a.createElement("span",{className:"movie-title mr-2 ".concat(a.state.viewCompleted?"completed-movie":""),title:e.description},e.title)),r.a.createElement("div",{className:"movie-image"},r.a.createElement("img",{src:e.poster,width:"100",alt:e.title+" poster"})),r.a.createElement("div",{className:"buttonz"},r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return a.editItem(e)}}," ","Edit"," "),r.a.createElement("button",{className:"delete-btn",onClick:function(){return a.handleDelete(e)}},"Delete"," "))))})},a.toggle=function(){a.setState({modal:!a.state.modal})},a.handleSubmit=function(e){a.toggle(),e.id?w.a.put("http://localhost:8000/api/movies/".concat(e.id,"/"),e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return a.refreshList()}):w.a.post("http://localhost:8000/api/movies/",e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return a.refreshList()})},a.handleSearchSubmit=function(e){w.a.post("http://localhost:8000/api/movies/",e,{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return a.refreshList()}),console.log(a.state.userid)},a.handleDelete=function(e){w.a.delete("http://localhost:8000/api/movies/".concat(e.id),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return a.refreshList()})},a.createItem=function(){fetch("http://localhost:8000/badmovietime/current_user",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(e){var t={title:"",description:"",completed:!1,user_shelf:a.state.userid};a.setState({activeItem:t,modal:!a.state.modal})})},a.editItem=function(e){a.setState({activeItem:e,modal:!a.state.modal})},a.onSearch=function(e){var t=a.state.movies.map(function(t){return t.title!==e?t:Object(s.a)({},t)});a.setState(function(e){return{movies:t}})},a.state={viewCompleted:!1,activeItem:{title:"",description:"",completed:!1,poster:"",user_shelf:[]},movies:[],displayed_form:"",logged_in:!!localStorage.getItem("token"),username:"",userid:0},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.state.logged_in&&fetch("http://localhost:8000/badmovietime/current_user",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(t){e.setState({userid:t.id})})}},{key:"componentDidMount",value:function(){var e=this;this.state.logged_in?fetch("http://localhost:8000/badmovietime/current_user",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(t){e.setState({username:t.username}),e.refreshList()}):this.refreshList()}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=r.a.createElement(O,{handle_login:this.handleLogin});break;case"signup":e=r.a.createElement(N,{handle_signup:this.handleSignup});break;default:e=null}return r.a.createElement("main",{className:"content"},r.a.createElement("div",{className:"everything-but-footer"},r.a.createElement(C,{logged_in:this.state.logged_in,displayed_form:this.displayForm,handle_logout:this.handleLogout}),e,r.a.createElement("h3",null,this.state.logged_in?"Hello, ".concat(this.state.username,"!"):"Please log in"),this.state.logged_in?r.a.createElement("div",{className:"flex-card-row"},r.a.createElement("div",{className:"flex-card seen"},r.a.createElement("div",{className:"card p-3"},r.a.createElement("h2",null,"Seen"),r.a.createElement("ul",{className:"list-group list-group-flush"},this.renderItems(!0)))),r.a.createElement("div",{className:"flex-card search"},r.a.createElement("div",{className:"card p-3"},r.a.createElement("div",{className:"search-comp"},r.a.createElement(I,{results:this.results,onSearch:this.onSearch,onSave:this.handleSearchSubmit,ID:this.state.userid,UN:this.state.username})))),r.a.createElement("div",{className:"flex-card to-see"},r.a.createElement("div",{className:"card p-3"},r.a.createElement("h2",null,"To See"),r.a.createElement("ul",{className:"list-group list-group-flush"},this.renderItems(!1))))):null,this.state.modal?r.a.createElement(k,{activeItem:this.state.activeItem,toggle:this.toggle,onSave:this.handleSubmit}):null),r.a.createElement("footer",null,r.a.createElement("h6",null,"Powered by ",r.a.createElement("a",{href:"https://themoviedb.org",target:"_blank",rel:"noopener noreferrer"},"The Movie Database"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.d3e8d377.chunk.js.map